!function(a,b){var c={menuContainer:null,menuClass:null,itemClass:null,itemHighlightedClass:null,interval:100,maxItem:5},d=function(a,d){if(0!==a.length){if("input"!==a[0].tagName.toLowerCase()||-1===b.inArray(a.attr("type").toLowerCase(),["text","search","email","url","tel"]))throw new Error('Only support "input" element with type of "text", "search", "email", "url" and "tel" ');if(d.menuContainer&&0===b(d.menuContainer).length)throw new Error("menuContainer is invalid");var e=a.attr("id")||a.attr("name");if(!e)throw new Error("Element must have an id or name");var f=this;f.options=b.extend({},c,d),f.inputField=a[0],f.$inputField=a,f.idOrName=e,f.inputField.googleSuggest=f,f.$menu=b("<ul/>").addClass(f.options.menuClass||""),f.menuContainer=f.options.menuContainer?b(f.options.menuContainer)[0]:f.$inputField.parent()[0],b(document).on("click touch",function(a){f.$inputField[0]!==a.target&&f.$menu.remove()}),f.$inputField.on("keydown",function(a){a&&f.$menu.parent()&&(38===a.which?(a.preventDefault(),f.lastSelectedIndex--,f.selectItem()):40===a.which?(a.preventDefault(),f.lastSelectedIndex++,f.selectItem()):27===a.which&&f.$menu.remove())}).on("focus",function(){f.startSuggest()}).on("blur",function(){f.stopSuggest()})}};d.callbacks={},d.defaults=c,b.extend(d.prototype,{options:null,id:null,$inputField:null,inputField:null,$menu:null,timer:null,lastInput:null,lastSelectedIndex:null,showSuggestions:function(a){var c=this;if(b.isArray(a)&&a.length>1&&a[1].length>0){c.lastSelectedIndex=-1,c.$menu.empty().appendTo(c.menuContainer);for(var d=[],e=0;e<a[1].length&&e<c.options.maxItem;e++){var f=b("<li/>");f.addClass(c.options.itemClass||""),f.text(a[1][e]),d.push(f[0])}b(d).appendTo(c.$menu).on("click touch",function(){c.selectItem(this),c.$inputField.focus()}).on("mouseenter",function(){c.$menu.children("."+c.options.itemHighlightedClass).removeClass(c.options.itemHighlightedClass),b(this).addClass(c.options.itemHighlightedClass),c.lastSelectedIndex=b(this).index()})}else c.$menu.remove()},getSuggestions:function(a){var c=this,d="https://suggestqueries.google.com/complete/search";b.ajax({type:"GET",url:d,dataType:"jsonp",jsonp:"jsonp",jsonpCallback:"GoogleSuggest.callbacks."+c.idOrName,data:{client:"chrome",q:a},error:function(){}})},addCallback:function(){var a=this;d.callbacks[a.idOrName]=function(b){a.showSuggestions(b)}},removeCallback:function(){delete d.callbacks[this.idOrName]},selectItem:function(a){if(!a){var c=this.$menu.children();c.removeClass(this.options.itemHighlightedClass),this.lastSelectedIndex=(this.lastSelectedIndex+c.length)%c.length,a=c[this.lastSelectedIndex]}b(a).addClass(this.options.itemHighlightedClass),this.$inputField.val(b(a).text()),this.lastInput=b(a).text()},startSuggest:function(){var a=this;a.addCallback(),a.timer=window.setTimeout(function b(){a.timer&&(window.clearTimeout(a.timer),a.timer=null);var c=a.$inputField.val();c!=a.lastInput&&(a.lastInput=c,a.getSuggestions(c)),a.timer=window.setTimeout(b,a.options.interval)},a.options.interval)},stopSuggest:function(){this.removeCallback(),this.timer&&(window.clearTimeout(this.timer),this.timer=null)}}),a.GoogleSuggest=d,b.fn.googleSuggest=function(a){return this.each(function(){"input"===this.tagName.toLowerCase()&&b.inArray(b(this).attr("type"),["text","search","email","url","tel"])>=0&&!this.googleSuggest&&new d(b(this),a)})}}(window,this.Zepto||this.jQuery);